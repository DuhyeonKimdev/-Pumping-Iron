<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fp.pi.member.MemberMapper">
 
 
 <!-- 회원가입 -->
 <insert id="join" parameterType="com.fp.pi.member.Member">
	insert into member values
	(#{m_email}, #{m_pw}, #{m_phone}, #{m_addr},
	#{m_name}, #{m_photo}, 0, 0, sysdate, 0)
 </insert>


<!-- 이메일 중복 확인  -->
<select id="emailCheck" parameterType="String" resultType="int">
 select count(*) from member where m_email = #{m_email}
</select>


<!-- 로그인  -->
<select id="getMemberByID" resultType="com.fp.pi.member.Member">
		select * from member where m_email = #{m_email}
</select>

<insert id="GetKey" parameterType="Map">
	update member set m_key = #{param2} where m_email = #{param1}
</insert>

<!--  -->
<update id="alter_userKey" parameterType="Map">
	update member set m_key = 'Y' where m_email = #{param1} and m_key = #{param2}
</update>

<select id="loginUser" resultType="com.fp.pi.member.Member">
		select * from member where m_email = #{m_email}
</select>

<!--회원탈퇴  -->
<delete id="withdrawal" parameterType="com.fp.pi.member.Member">
		delete member where m_email = #{m_email}
</delete>

<!--아이디 찾기  -->
<select id="searchId" resultType="String">
		select m_email from member 
        where m_name = #{m_name} and m_phone = #{m_phone} and m_key = 'Y'
</select>

<!--비밀번호 찾기  -->
<update id="searchPassword" parameterType="Map">
		update member set m_pw = #{param3} where m_email = #{param1} and m_phone = #{param2}
</update>

<!-- 정보 얻기 -->
<select id="memberInfo" resultType="com.fp.pi.member.Member">
		select * from member where m_email = #{m_email} 
</select>	

<!-- 회원정보 조회 전 비밀번호 체크 -->
<select id="infoPwChek" resultType="com.fp.pi.member.Member">
	select * from member where m_pw = #{m_pw}
</select>
</mapper>